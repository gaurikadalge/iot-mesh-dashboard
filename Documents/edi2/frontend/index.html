<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Enhanced IoT Disaster Dashboard</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Chart.js + Zoom Plugin -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1"></script>

  <!-- Leaflet.js -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="styles.css">
</head>

<body>

  <!-- MOBILE MENU BUTTON -->
  <button class="mobile-menu-btn">
    <i class="fas fa-bars"></i>
  </button>

  <!-- SIDEBAR -->
  <aside id="sidebar">
    <button class="toggle-sidebar">
      <i class="fas fa-chevron-left"></i>
    </button>

    <div class="logo">
      <i class="fas fa-satellite-dish"></i>
      <span class="logo-text">IoT Mesh Network</span>
    </div>

    <nav>
      <a href="#" class="active" onclick="switchPage('dashboard')">
        <i class="fas fa-chart-line"></i>
        <span>Dashboard</span>
      </a>
      <a href="#" onclick="switchPage('alerts')">
        <i class="fas fa-bell"></i>
        <span>Alerts</span>
      </a>
      <a href="#" onclick="switchPage('devices')">
        <i class="fas fa-microchip"></i>
        <span>Devices</span>
      </a>
      <a href="#" onclick="switchPage('settings')">
        <i class="fas fa-cog"></i>
        <span>Settings</span>
      </a>
      <a href="#" id="themeToggle">
        <i class="fas fa-moon"></i>
        <span>Dark Mode</span>
      </a>
    </nav>
  </aside>

  <!-- MAIN CONTENT -->
  <main id="content">

    <!-- HEADER -->
    <div class="header">
      <div>
        <h1 class="page-title">
          <i class="fas fa-satellite"></i>
          <span id="pageTitle">Disaster Monitoring Dashboard</span>
        </h1>
        <p class="mb-0">Real-time environmental data from IoT sensor network</p>
      </div>

      <div class="status-indicators">
        <div class="status-indicator">
          <div class="status-dot online"></div>
          <span>Online: <span id="onlineCount">12</span></span>
        </div>
        <div class="status-indicator">
          <div class="status-dot warning"></div>
          <span>Warning: <span id="warningCount">3</span></span>
        </div>
        <div class="status-indicator">
          <div class="status-dot offline"></div>
          <span>Offline: <span id="offlineCount">1</span></span>
        </div>
      </div>
    </div>

    <!-- ALERT BANNER -->
    <div id="alertBanner"></div>
    <div id="popup"></div>

    <!-- ****** DASHBOARD PAGE ****** -->
    <section id="dashboardPage">

      <!-- CARDS -->
      <div class="row g-3 mt-2">
        <div class="col-md-3">
          <div class="stat-card">
            <h5><i class="fas fa-tint"></i> Soil Moisture</h5>
            <div class="value" id="soilValue">--%</div>
            <div class="trend up"><i class="fas fa-arrow-up"></i> 2% from last hour</div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="stat-card">
            <h5><i class="fas fa-cloud"></i> Humidity</h5>
            <div class="value" id="humidityValue">--%</div>
            <div class="trend down"><i class="fas fa-arrow-down"></i> 5% from last hour</div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="stat-card">
            <h5><i class="fas fa-wind"></i> Wind Speed</h5>
            <div class="value" id="windValue">-- km/h</div>
            <div class="trend up"><i class="fas fa-arrow-up"></i> 3 km/h from last hour</div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="stat-card">
            <h5><i class="fas fa-thermometer-half"></i> Temperature</h5>
            <div class="value" id="tempValue">--°C</div>
            <div class="trend down"><i class="fas fa-arrow-down"></i> 1°C from last hour</div>
          </div>
        </div>
      </div>

      <!-- AI PREDICTION CARD -->
      <div class="row mt-4">
        <div class="col-12">
          <div class="stat-card" id="aiRiskCard" style="border-left: 5px solid #22c55e;">
            <div class="d-flex justify-content-between align-items-center">
              <div>
                <h5 class="mb-1"><i class="fas fa-robot"></i> AI Risk Assessment</h5>
                <p class="mb-0 text-muted">Real-time predictive analysis based on sensor fusion</p>
              </div>
              <div class="text-end">
                <h3 class="mb-0" id="riskLevel">LOW RISK</h3>
                <small id="aiAnalysis">Conditions are stable.</small>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- CHARTS -->
      <div class="row g-3 mt-4">
        <div class="col-md-6">
          <div class="chart-card">
            <div class="chart-header">
              <h5>Soil Moisture Trend</h5>
              <div class="chart-actions">
                <button onclick="resetZoom('soil')" title="Reset Zoom"><i class="fas fa-search-minus"></i></button>
                <button onclick="openFullscreen('soil')" title="Fullscreen"><i class="fas fa-expand"></i></button>
              </div>
            </div>
            <div class="chart-container">
              <canvas id="soilChart"></canvas>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="chart-card">
            <div class="chart-header">
              <h5>Humidity Trend</h5>
              <div class="chart-actions">
                <button onclick="resetZoom('humidity')" title="Reset Zoom"><i class="fas fa-search-minus"></i></button>
                <button onclick="openFullscreen('humidity')" title="Fullscreen"><i class="fas fa-expand"></i></button>
              </div>
            </div>
            <div class="chart-container">
              <canvas id="humidityChart"></canvas>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="chart-card">
            <div class="chart-header">
              <h5>Wind Speed Trend</h5>
              <div class="chart-actions">
                <button onclick="resetZoom('wind')" title="Reset Zoom"><i class="fas fa-search-minus"></i></button>
                <button onclick="openFullscreen('wind')" title="Fullscreen"><i class="fas fa-expand"></i></button>
              </div>
            </div>
            <div class="chart-container">
              <canvas id="windChart"></canvas>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="chart-card">
            <div class="chart-header">
              <h5>Temperature Trend</h5>
              <div class="chart-actions">
                <button onclick="resetZoom('temp')" title="Reset Zoom"><i class="fas fa-search-minus"></i></button>
                <button onclick="openFullscreen('temp')" title="Fullscreen"><i class="fas fa-expand"></i></button>
              </div>
            </div>
            <div class="chart-container">
              <canvas id="tempChart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- MAP -->
      <div class="row mt-4">
        <div class="col-12">
          <h5><i class="fas fa-map-marked-alt"></i> Sensor Network Map</h5>
          <div id="mapContainer">
            <div id="map"></div>
          </div>
        </div>
      </div>

    </section>

    <!-- ****** ALERT HISTORY PAGE ****** -->
    <section id="alertsPage" style="display:none;">
      <h1 class="page-title"><i class="fas fa-bell"></i> Alert History</h1>
      <p>Recent alerts and notifications from the IoT sensor network</p>

      <div class="d-flex mb-3">
        <button class="btn btn-sm btn-outline-primary me-2 active">All Alerts</button>
        <button class="btn btn-sm btn-outline-primary me-2">Critical</button>
        <button class="btn btn-sm btn-outline-primary me-2">Warnings</button>
        <button class="btn btn-sm btn-outline-primary">Info</button>
      </div>

      <ul id="alertList" class="alert-list"></ul>
    </section>

    <!-- ****** DEVICES PAGE ****** -->
    <section id="devicesPage" style="display:none;">
      <h1 class="page-title"><i class="fas fa-microchip"></i> Connected Devices</h1>
      <p>Manage and monitor all IoT devices in the network</p>

      <div class="row">
        <div class="col-md-6 col-lg-3 mb-3">
          <div class="stat-card">
            <h5><i class="fas fa-sensor"></i> Soil Sensors</h5>
            <div class="value">8</div>
            <div class="trend"><i class="fas fa-circle online"></i> All Online</div>
          </div>
        </div>
        <div class="col-md-6 col-lg-3 mb-3">
          <div class="stat-card">
            <h5><i class="fas fa-wind"></i> Weather Stations</h5>
            <div class="value">4</div>
            <div class="trend"><i class="fas fa-circle warning"></i> 1 Warning</div>
          </div>
        </div>
        <div class="col-md-6 col-lg-3 mb-3">
          <div class="stat-card">
            <h5><i class="fas fa-temperature-high"></i> Temp Sensors</h5>
            <div class="value">6</div>
            <div class="trend"><i class="fas fa-circle online"></i> All Online</div>
          </div>
        </div>
        <div class="col-md-6 col-lg-3 mb-3">
          <div class="stat-card">
            <h5><i class="fas fa-camera"></i> Cameras</h5>
            <div class="value">3</div>
            <div class="trend"><i class="fas fa-circle offline"></i> 1 Offline</div>
          </div>
        </div>
      </div>

      <div class="chart-card mt-4">
        <h5>Device Status Overview</h5>
        <div class="chart-container">
          <canvas id="deviceStatusChart"></canvas>
        </div>
      </div>
    </section>

    <!-- ****** SETTINGS PAGE ****** -->
    <section id="settingsPage" style="display:none;">
      <h1 class="page-title"><i class="fas fa-cog"></i> Settings</h1>
      <p>Configure your IoT dashboard and network settings</p>

      <div class="row">
        <div class="col-md-6">
          <div class="chart-card">
            <h5>Notification Preferences</h5>
            <div class="form-check form-switch mb-3">
              <input class="form-check-input" type="checkbox" id="criticalAlerts" checked>
              <label class="form-check-label" for="criticalAlerts">Critical Alerts</label>
            </div>
            <div class="form-check form-switch mb-3">
              <input class="form-check-input" type="checkbox" id="warningAlerts" checked>
              <label class="form-check-label" for="warningAlerts">Warning Alerts</label>
            </div>
            <div class="form-check form-switch mb-3">
              <input class="form-check-input" type="checkbox" id="deviceStatus" checked>
              <label class="form-check-label" for="deviceStatus">Device Status Changes</label>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="dataUpdates">
              <label class="form-check-label" for="dataUpdates">Regular Data Updates</label>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="chart-card">
            <h5>Data Refresh Rate</h5>
            <div class="mb-3">
              <label for="refreshRate" class="form-label">Update every: <span id="refreshValue">5</span> seconds</label>
              <input type="range" class="form-range" min="1" max="30" value="5" id="refreshRate">
            </div>

            <h5>Chart Display</h5>
            <div class="form-check form-switch mb-3">
              <input class="form-check-input" type="checkbox" id="smoothLines" checked>
              <label class="form-check-label" for="smoothLines">Smooth Chart Lines</label>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="dataPoints" checked>
              <label class="form-check-label" for="dataPoints">Show Data Points</label>
            </div>
          </div>
        </div>
      </div>
    </section>

  </main>

  <!-- FULLSCREEN MODAL -->
  <div class="modal fade" id="chartModal" tabindex="-1">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalChartTitle">Chart Details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body p-4">
          <div class="chart-container-modal">
            <canvas id="modalChart"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- JAVASCRIPT -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="scripts.js"></script>
</body>

</html>